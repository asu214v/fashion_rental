{% extends "base.html" %}

{% block content %}
<h1>商品出品</h1>

<form method="post" enctype="multipart/form-data" id="rentalForm">
  {% csrf_token %}
  <label>商品名: <input type="text" name="name" required></label><br>
  <label>説明: <textarea name="description"></textarea></label><br>
  <label>価格: <input type="number" name="price" required></label><br>
  <label>カテゴリ:</label>
  <select name="category" required>
      <option value="メンズ">メンズ</option>
      <option value="レディース">レディース</option>
      <option value="ユニセックス">ユニセックス</option>
  </select><br>

  <label>タイプ:</label>
  <select name="type" required>
      <option value="新品">新品</option>
      <option value="古着">古着</option>
  </select><br><br>

  <label>サイズ: <input type="text" name="size"></label><br>
  <label>ブランド: <input type="text" name="brand"></label><br>
  <label>コンディション:</label>
  <select name="condition">
      <option value="新品同様">新品同様</option>
      <option value="良い">良い</option>
      <option value="傷">傷が汚れがある</option>
      <option value="悪">状態が悪い</option>
  </select><br>

  <label>カラー:</label>
  <input type="hidden" name="color" id="selectedColorInput" required>
  <span id="displayColorBanner" style="margin-left: 10px; padding: 2px 10px; border-radius: 4px; color: white; display: none; font-weight: bold;"></span>
  <button type="button" id="openColorModal" style="border: 1px solid #ccc; background-color: #f9f9f9; cursor: pointer;">選択</button>
  
  <div id="colorModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
      <div style="background: white; padding: 20px; border-radius: 8px; max-width: 400px; width: 90%; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
          <h3 style="margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px;">カラーを選択</h3>
          <div id="colorOptionsContainer" style="max-height: 250px;">
              <div style="display: flex; flex-wrap: wrap; gap: 8px 20px;">
                  <label><input type="radio" name="colorOption" value="ホワイト" required> ホワイト</label>
                  <label><input type="radio" name="colorOption" value="ブラック" required> ブラック</label>
                  <label><input type="radio" name="colorOption" value="グレー" required> グレー</label>
                  <label><input type="radio" name="colorOption" value="ブラウン" required> ブラウン</label>
                  <label><input type="radio" name="colorOption" value="グリーン" required> グリーン</label>
                  <label><input type="radio" name="colorOption" value="ブルー" required> ブルー</label>
                  <label><input type="radio" name="colorOption" value="パープル" required> パープル</label>
                  <label><input type="radio" name="colorOption" value="イエロー" required> イエロー</label>
                  <label><input type="radio" name="colorOption" value="ピンク" required> ピンク</label>
                  <label><input type="radio" name="colorOption" value="レッド" required> レッド</label>
                  <label><input type="radio" name="colorOption" value="その他" required> その他</label>
              </div>
          </div>

          <button type="button" id="closeColorModal" style="margin-top: 15px; padding: 8px 15px; width: 100%; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
              決定
          </button>
      </div>
  </div>
  
  <h3>📸 カメラで撮影</h3>
  <video id="camera" autoplay playsinline style="width:100%; max-width:400px;"></video>
  <p id="cameraErrorMessage" style="color: red; display: none;">カメラアクセスが必要です。設定をご確認ください。</p>   
  <canvas id="snapshot" style="display:none;"></canvas>
  <div id="capturedImagesContainer"></div>
  <label>画像アップロード: <input type="file" name="images" multiple></label><br>

  <button type="button" id="capture">撮影</button><br><br>
  <button type="submit">出品する</button>
</form>
{% endblock %}